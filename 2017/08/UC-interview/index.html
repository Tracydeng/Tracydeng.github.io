<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <title>UC电话面试</title>
  <meta name="description" content="1.介绍自己，经历，项目">
  <meta name="author" content="Wei Wang">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="UC电话面试">
  <meta name="twitter:description" content="1.介绍自己，经历，项目">
  
  <meta property="og:type" content="article">
  <meta property="og:title" content="UC电话面试">
  <meta property="og:description" content="1.介绍自己，经历，项目">
  
  <link rel="icon" type="image/png" href="/assets/images/favicon.png" />
  <link href="/assets/images/favicon.png" rel="shortcut icon" type="image/png">
  
  <link rel="stylesheet" href="/css/main.css">
  <link href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">

  <link rel="canonical" href="http://localhost:4000/2017/08/UC-interview/">
  <link rel="alternate" type="application/rss+xml" title="Coder iSteven" href="http://localhost:4000/feed.xml">
  
  <meta name="google-site-verification" content="1-1ZlHoRvM0T2FqPbW2S-qLgYXN6rsn52kErlMPd_gw" />
  
</head>


  <body>

    <span class="mobile btn-mobile-menu">
        <i class="fa fa-list btn-mobile-menu__icon"></i>
        <i class="fa fa-angle-up btn-mobile-close__icon hidden"></i>
    </span>
    
    <header class="panel-cover panel-cover--collapsed" style="background-image: url('/assets/images/background-cover.jpg')">
  <div class="panel-main">

    <div class="panel-main__inner panel-inverted">
    <div class="panel-main__content">

        <a href="/#blog" title="前往 Coder iSteven 的主页" class="blog-button"><img src="/assets/images/avatar.jpg" width="80" alt="Coder iSteven logo" class="panel-cover__logo logo" /></a>
        <h1 class="panel-cover__title panel-title"><a href="/#blog" title="link to homepage for Coder iSteven" class="blog-button">Coder iSteven</a></h1>
        
        <span class="panel-cover__subtitle panel-subtitle">上善若水</span>
        
        <hr class="panel-cover__divider" />
        <p class="panel-cover__description">记录自己的点滴</p>
        <hr class="panel-cover__divider panel-cover__divider--secondary" />
        
        
        
        <div class="navigation-wrapper">
          <div>
            <nav class="cover-navigation cover-navigation--primary">
              <ul class="navigation">
                <li class="navigation__item"><a href="/#blog" title="Visit blog" class="blog-button">Blog</a></li>
                
              </ul>
            </nav>
          </div>
          
          <div><nav class="cover-navigation navigation--social">
  <ul class="navigation">

  
  <!-- Weibo -->
  <li class="navigation__item">
    <a href="http://weibo.com/736029053" title="@736029053 的微博" target="_blank">
      <i class='social fa fa-weibo'></i>
      <span class="label">Weibo</span>
    </a>
  </li>
  

  
  <!-- Github -->
  <li class="navigation__item">
    <a href="https://github.com/tracydeng" title="@tracydeng 的 Github" target="_blank">
      <i class='social fa fa-github'></i>
      <span class="label">Github</span>
    </a>
  </li>
  
  
  

  

  <!-- RSS -->
  <li class="navigation__item">
    <a href="/feed.xml" rel="author" title="RSS" target="_blank">
      <i class='social fa fa-rss'></i>
      <span class="label">RSS</span>
    </a>
  </li>

  
  <!-- Email -->
  <li class="navigation__item">
    <a href="mailto:coderisteven@gmail.com" title="Contact me">
      <i class='social fa fa-envelope'></i>
      <span class="label">Email</span>
    </a>
  </li>
  

  </ul>
</nav>
</div>
        </div>
      </div>
    </div>
    
    
    <div class="panel-cover--overlay cover-green"></div>
    
  </div>
</header>


    <div class="content-wrapper">
        <div class="content-wrapper__inner">
            <article class="post-container post-container--single" itemscope itemtype="http://schema.org/BlogPosting">
  <header class="post-header">
    <div class="post-meta">
      <time datetime="2017-08-21 00:00:00 +0800" itemprop="datePublished" class="post-meta__date date">2017-08-21</time> &#8226; <span class="post-meta__tags tags"></span>
    </div>
    <h1 class="post-title">UC电话面试</h1>
  </header>

  <section class="post">
    <h4 id="1介绍自己经历项目">1.介绍自己，经历，项目</h4>

<h4 id="2项目中做过哪些工作项目的结构是怎么样的具体说一下">2.项目中做过哪些工作，项目的结构是怎么样的，具体说一下</h4>

<h4 id="3runtime是什么和c的运行时有什么不同">3.runtime是什么，和C++的运行时有什么不同</h4>

<p>这都是问烂了的题目</p>

<h4 id="4对象的isa指针指向的是什么">4.对象的isa指针指向的是什么</h4>

<p>实例的isa指针指向类对象，类对象的isa指针指向元类对象；</p>

<p>类对象里面维护着实例方法列表，类方法列表维护在元类对象中，这也就能理解实例方法和类方法调用的区别了</p>

<h4 id="5你觉的苹果在msg_send上面做过哪些优化">5.你觉的苹果在msg_send()上面做过哪些优化？  </h4>
<p>查找方法设置缓存 	
先到自己类缓存查找（如果没缓存，创建缓存），没找到就到方法列表查找，还未找到，父类缓存查找，再到父类方法列表查找</p>

<p><a href="https://blog.ibireme.com/2013/11/26/objective-c-messaging/#more-41432">https://blog.ibireme.com/2013/11/26/objective-c-messaging/#more-41432</a></p>

<h4 id="6-runloop是什么">6. runloop是什么</h4>

<p>理解了就能应对各种变种的问题</p>

<p><a href="https://blog.ibireme.com/2015/05/18/runloop/">https://blog.ibireme.com/2015/05/18/runloop/</a></p>

<h4 id="7-主线程的runloop做了什么工作">7. 主线程的runloop做了什么工作</h4>

<p>看过上面文章也就应该知道了：</p>

<p>timer事件
source事件： 包括一般的source0被动事件（UI响应，监听的自动释放池push,pop等等），以及一般基于mach_port主动触发的source1事件（一般硬件接口触发）</p>

<h4 id="8-delegate和kvo分别是什么">8. delegate和kvo分别是什么</h4>

<h4 id="9-多线程你一般用的什么">9. 多线程你一般用的什么</h4>

<h4 id="10-多线程同步对象的方式">10. 多线程同步对象的方式</h4>
<ul>
  <li>原子操作</li>
  <li>线程锁</li>
  <li>条件/信号量</li>
  <li>使用Selector</li>
  <li>内存屏障和Volatile</li>
</ul>

<p><a href="http://www.dreamingwish.com/article/the-ios-multithreaded-programming-guide-4-thread-synchronization.html">http://www.dreamingwish.com/article/the-ios-multithreaded-programming-guide-4-thread-synchronization.html</a></p>

<h4 id="11-dispatch_once的实现">11. dispatch_once的实现</h4>

<p>主要从两方面考虑：</p>

<ul>
  <li>1.保证执行一次；</li>
  <li>2.线程安全</li>
</ul>

<p>dispatch_once 使用标记保证执行一次，在保证线程安全上使用的是原子操作（硬件级的锁）
使用DISPATCH_EXPECT(x,v) __built_expect((x),(v)),帮助编译器判断条件跳转的预期值，以减少指令跳转带来的性能降低</p>

<p><a href="http://www.dreamingwish.com/article/gcd-guide-dispatch-once-1.html
https://bestswifter.com/deep-gcd/">http://www.dreamingwish.com/article/gcd-guide-dispatch-once-1.html
https://bestswifter.com/deep-gcd/</a></p>

<h4 id="12-有没有做过socket方面的网络编程说一下tcpudp的不同udp发送的数据包最大是多少tcpudp属于哪一层udp通信有哪些地方可以优化">12. 有没有做过socket方面的网络编程，说一下TCP/UDP的不同，UDP发送的数据包最大是多少，TCP/UDP属于哪一层，UDP通信有哪些地方可以优化？ </h4>
<p>TCP是面向数据流，有连接的（三次握手建立），所以是可靠的</p>

<p>UDP是面向数据包，无连接的，在复杂网络环境存在丢包可能，是不可靠的</p>

<p>都有各自的应用场景，比如做音视频的实时通信，就一般采用UDP，过程中丢一两帧无所谓，但是采用可靠连接，网络不好，重发造成的延时体验就不好了</p>

<p>TCP／UDP都属于传输层协议（也有叫运输层的）</p>

<p>数据链路层MTU限制最大1500字节，出去IP头部占用20字节，UDP头部占用8字节，所以实际数据最大只有1472字节，如果数据超过该大小就会被分片</p>

<h4 id="13-有用过什么来做数据持久化数据库操作可以在哪些方面来优化">13. 有用过什么来做数据持久化，数据库操作可以在哪些方面来优化</h4>

<p>为需要频繁查询的列创建索引，索引有序的数据结构虽然可以提高查询效率，但同时会在维护索引时增加性能的损耗（增删操作都要对应修改索引）和空间的占用</p>

<p>索引：一般是平衡树(B-Tree)或者平衡树变种(B+Tree,B*Tree)的数据结构</p>

<ul>
  <li>聚集索引 (一个表只能有一个聚集索引，其保持和表一样的物理顺序)</li>
  <li>非聚集索引</li>
</ul>

<h4 id="14-uiview和calayer是什么关系分别处理什么">14. UIView和CAlayer是什么关系，分别处理什么</h4>

<p><code class="highlighter-rouge">UIView</code>继承UIResponder  再继承NSObject，持有layer，frame，bounds，center;</p>

<p><code class="highlighter-rouge">CALayer</code>直接继承自NSObject，拥有frame，bounds，position，anchorpoint等属性;</p>

<p>从上面看UIView是可以接收时间响应的，UIView可以看作是CALayer的管理器，接收事件响应，而真正去做视图绘制的是CALayer，两者都有树状层级结构</p>

<p><a href="http://www.jianshu.com/p/079e5cf0f014">http://www.jianshu.com/p/079e5cf0f014</a></p>

<p><a href="http://kittenyang.com/anchorpoint/">Layer的anchorpoint和position</a></p>

<h4 id="15-有没有做过性能优化方面的东西具体说一些自己在项目中做的性能优化的例子">15. 有没有做过性能优化方面的东西，具体说一些自己在项目中做的性能优化的例子 </h4>
<p>UI耗性能的地方一般在：</p>

<ul>
  <li>Layout ：文本宽高计算，视图布局计算</li>
  <li>Rendering：文本渲染，图片解码，图形绘制</li>
  <li>UIKit Objects：对象创建，调整，销毁 </li>
</ul>

<p>由于UIView和CALayer都属于非线程安全的，其对象的处理都需要放在主线中，过多的操作必然阻塞主线程，造成性能问题 </p>

<p>UI性能上有做优化的开源项目： </p>
<h5 id="asyncdisplaykit">AsyncDisplayKit </h5>
<blockquote>
  <p>创建线程安全的ASDispalyNode类，包装常见的视图属性frame/bounds/alpha/transform/backGroundColor 等，然后同样使用UIView-&gt;CALayer一样的方式管理UIView </p>
</blockquote>

<ul>
  <li>视图不需要响应事件时，直接使用CALayer</li>
  <li>图层预合成</li>
  <li>异步并发操作</li>
  <li>RunLoop任务分发（注册一个Observer，在进入休眠前，Core Anitmation处理完事件后，来执行该loop内提交的必须在主线程执行的任务） </li>
</ul>

<h5 id="yyasynclayer">YYAsyncLayer</h5>

<blockquote>
  <p>使用异步绘制，</p>
</blockquote>

<h5 id="fdtemplatelayoutcell">FDTemplateLayoutCell</h5>

<blockquote>
  <p>使用了Runloop实现cell高度预计算，并缓存下来，以减少cell绘制时重复的计算，cell绘制重复计算的频率惊人，具体<a href="http://blog.sunnyxx.com/2015/05/17/cell-height-calculation/">戳这里</a></p>
</blockquote>

<h5 id="vvebotableviewdemo">VVeboTableViewDemo</h5>

<blockquote>
  <p>当滑动时，松开手指后，立刻计算出滑动停止时 Cell 的位置，并预先绘制那个位置附近的几个 Cell，而忽略当前滑动中的 Cell。这个方法比较有技巧性，并且对于滑动性能来说提升也很大，唯一的缺点就是快速滑动中会出现大量空白内容。</p>
</blockquote>

<p><a href="https://blog.ibireme.com/2015/11/12/smooth_user_interfaces_for_ios/">https://blog.ibireme.com/2015/11/12/smooth_user_interfaces_for_ios/</a></p>

<h4 id="16-用过bugly知道bugly是怎么做到还原代码行的吗bugly-sdk手机堆栈信息上报然后使用atos工具配合符号表将堆栈对应的地址转化为代码行包括行号这是需要上传符号表时期的bugly">16. 用过bugly，知道bugly是怎么做到还原代码行的吗  bugly SDK手机堆栈信息上报，然后使用atos工具配合符号表，将堆栈对应的地址转化为代码行，包括行号（这是需要上传符号表时期的bugly）  </h4>
<div class="highlighter-rouge"><pre class="highlight"><code>$xcrun atos -o executable -arch architecture -l loadAddress address ...  

说明：
 loadAddress表示函数的动态加载地址，对应崩溃地址堆栈中 + 号前面的地址，即0x000ef000
 address表示运行时地址、对应崩溃地址堆栈中第一个地址，即0x0010143b
 实际上，崩溃地址堆栈中+号前后的地址相加即是运行时地址，即0x000ef000 + 74808 = 0x0010143b   [http://blog.csdn.net/tencent_bugly/article/details/46275773](http://blog.csdn.net/tencent_bugly/article/details/46275773)
</code></pre>
</div>

<h4 id="17-平时是怎么定位crash的怎么关注app性能方面问题的">17. 平时是怎么定位crash的，怎么关注app性能方面问题的</h4>

<h4 id="18-oc的字典是怎么实现的效率是多少使用的什么类型的hashmap如果是一个1000数据的字典和一个100w数据的字典查找效率有没有不一样">18. OC的字典是怎么实现的，效率是多少，使用的什么类型的hashmap，如果是一个1000数据的字典和一个100w数据的字典，查找效率有没有不一样</h4>

<p>哈希表的实现主要关注：</p>

<ul>
  <li>1.如何构造哈希函数（函数冲突碰撞概率小，函数的效率）</li>
  <li>
    <p>2.如何处理冲突</p>

    <p>哈希构造函数一般有五种：数字分析法，平方取中法，分段叠加法，除留余数法，伪随机数法</p>

    <p>处理冲突方法：开放地址法（散列法），再哈希法，链地址法</p>

    <p>一般的哈希表的数据结构采用链表形式，出现冲突都是直接插入对应key所在链表的后面，也就很容易实现扩容，但存在一次二级指针的获取开销；而OC的字典实现是数组，（基于预估冲突很少发生才这么设计）一旦冲突很多，效率就低了，频繁的扩容 alloc，free开销就很大了</p>
  </li>
</ul>

<p><a href="http://ibloodline.com/articles/2016/07/11/NSDictionary.html">http://ibloodline.com/articles/2016/07/11/NSDictionary.html</a></p>

<h4 id="19-你做过react-native开发有没有了解过阿里的weex">19. 你做过react-native开发，有没有了解过阿里的weex</h4>

<h4 id="20-有没有遇到过什么难的问题最后怎么解决的">20. 有没有遇到过什么难的问题，最后怎么解决的  </h4>
<ul>
  <li>
    <p>最近的自动化测试脚本遇到执行卡死问题  
  <a href="https://testerhome.com/topics/8429">https://testerhome.com/topics/8429</a></p>
  </li>
  <li>
    <p>python subprocess子进程执行tail命令读取模拟器系统日志，存在偶然读取不到情况，后面发现存在两个原因： </p>
    <ol>
      <li>app中使用DDLog打印日志，存在打印日志线程crash了，日志并未写入到system.log </li>
      <li>系统日志中有，但是正则未匹配上，这个不好说，还一直处于猜测和调试中</li>
    </ol>
  </li>
</ul>

<p>现在在app中不修改组件库代码，只用分类中swizzle对应方法（装饰器模式）在debug模式下添加socket 上报日志，python这边创建socket server单例，储存一个全局的日志栈，当系统日志文件未匹配到的时候再到这里匹配（涉及多线程数据同步问题，加锁），定时（一个case执行完）清除日志栈，双重保险机制</p>

<h4 id="21-你觉得你们目前项目还有没有哪些地方可以优化的">21. 你觉得你们目前项目还有没有哪些地方可以优化的</h4>

<h4 id="22-讲讲自己用到的设计模式">22. 讲讲自己用到的设计模式</h4>

<p>最后一个问题：</p>

<h4 id="23-如果让你实现僵尸对象引起的crash的补救怎么设计">23. 如果让你实现僵尸对象引起的crash的补救怎么设计 </h4>

<p>在所有对象的dealloc方法中，通过运行时创建加个前缀标示的类来替换该类，并实现该类（Xcode使用的就是NSZombie这个类，该类没有任何方法，也没有父类，所有调用都会crash），然后在三次补救转发方法中去前缀，打印出类和调用的方法 
 <a href="http://ibloodline.com/articles/2016/09/01/NSZombie.html">http://ibloodline.com/articles/2016/09/01/NSZombie.html</a></p>


  </section>
</article>

<section class="read-more">
   
   
   
   
   <div class="read-more-item">
       <span class="read-more-item-dim">更早的文章</span>
       <h2 class="post-list__post-title post-title"><a href="/2017/02/appium-install/" title="link to 我的Appium踩坑之旅">我的Appium踩坑之旅</a></h2>
       <p class="excerpt">背景      Appium目前最新的版本是 1.6.3 ，appium客户端(appium server的GUI图形化操作界面)最新版本是 1.5.3， 但是appium GUI目前还只支持到iOS10以下基于UIAutomation框架的测试，而iOS10以后苹果已经更改为XCUITest了    我们项目中想要做到对开发代码无侵染的方式来达到自动化测试的目的（这就需要通过xpath的方式去查找页面元素）  项目是使用React Native跨平台开发的应用综合这三个背景，并且iOS ...&hellip;</p>
       <div class="post-list__meta"><time datetime="2017-02-25 00:00:00 +0800" class="post-list__meta--date date">2017-02-25</time> &#8226; <span class="post-list__meta--tags tags"></span><a class="btn-border-small" href=/2017/02/appium-install/>继续阅读</a></div>
   </div>
   
</section>

<section class="post-comments">
  
    <div id="disqus_thread"></div>
    <script>
    
    var disqus_config = function () {
        this.page.url = "http://localhost:4000/2017/08/UC-interview/";
        this.page.identifier = "/2017/08/UC-interview/";
    };

    var disqus_shortname = 'vno-jekyll';
    
    (function() { // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');
        s.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();
    </script>
    <noscript>要查看<a href="http://disqus.com/?ref_noscript"> Disqus </a>评论，请启用 JavaScript</noscript>
    
  
  
  
  
</section>


            <section class="footer">
    <footer>
    	<span class="footer__copyright">本站点采用<a href="http://creativecommons.org/licenses/by-nc-sa/4.0/">知识共享 署名-非商业性使用-相同方式共享 4.0 国际 许可协议</a></span>
        <span class="footer__copyright">由 <a href="https://jekyllrb.com">Jekyll</a> 于 2017-08-22 生成，感谢 <a href="https://pages.github.com">Github Pages</a> 为本站提供稳定的 VPS 服务</span>
        <span class="footer__copyright">本站由 <a href="http://gcgbz.com.cn">@iSteven</a> 创建，采用 <a href="https://github.com/onevcat/vno-jekyll">Vno - Jekyll</a> 作为主题，您可以在 GitHub 找到<a href="https://github.com/onevcat/OneV-s-Den">本站源码</a> - &copy; 2017</span>
    </footer>
</section>

        </div>
    </div>
    
    <script type="text/javascript" src="//code.jquery.com/jquery-1.11.3.min.js"></script>

<script type="text/javascript" src="/js/main.js"></script>



    
  </body>

</html>
